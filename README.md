# devops-netology  
## Шевякин Кирилл  

# Домашнее задание к занятию "6.1. Типы и структура СУБД"

## Доработка - Изучил все доп материалы

## Задача 1

Архитектор ПО решил проконсультироваться у вас, какой тип БД 
лучше выбрать для хранения определенных данных.

Он вам предоставил следующие типы сущностей, которые нужно будет хранить в БД:

- Электронные чеки в json виде
- Склады и автомобильные дороги для логистической компании
- Генеалогические деревья
- Кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации
- Отношения клиент-покупка для интернет-магазина

Выберите подходящие типы СУБД для каждой сущности и объясните свой выбор.

### Ответ  

- Электронные чеки в json виде  
  Подойдет документо-ориентированная nosql-база, потому что хранятся только документы - файлы в формате json  
  
- Склады и автомобильные дороги для логистической компании  
  Подойдет документо-ориентированная nosql-база, потому что склады и дороги можно представить в виде графов  
  
- Генеалогические деревья  
  Подойдет иерархическая база данных, потому что генеалогические деревья идеально можно представить в образе иерархии  
  
- Кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации  
  Подойдет nosql-база типа Redis или Memcached, потому что они для этого функционала и созданы и используются  
  
- Отношения клиент-покупка для интернет-магазина
  Подойдет классическая реляционная sql-база, потому что все данные можно представить в виде таблиц  

## Задача 2

Вы создали распределенное высоконагруженное приложение и хотите классифицировать его согласно 
CAP-теореме. Какой классификации по CAP-теореме соответствует ваша система, если 
(каждый пункт - это отдельная реализация вашей системы и для каждого пункта надо привести классификацию):

- Данные записываются на все узлы с задержкой до часа (асинхронная запись)
- При сетевых сбоях, система может разделиться на 2 раздельных кластера
- Система может не прислать корректный ответ или сбросить соединение

А согласно PACELC-теореме, как бы вы классифицировали данные реализации?

### Ответ  

- Данные записываются на все узлы с задержкой до часа (асинхронная запись)  
  По CAP я бы классифицировал эту систему как PA, данные не синхронизованы, но доступны и готовы к разделению
  По PACELC я бы классифицировал эту систему как PAEL, нет консистентности и при PA упор делается на доступность  
  #### Доработка  
  Судя по тому, что предыдущее мое решения неправильное, то вы имеете в виду, что такая система будет CA, потому что данные записываются на все узлы, т.е. консистентны   и есть всегда доступ, а поскольку есть теорема CAP, то в такой системе нет P  
  По PACELC я бы не классифицировал эту систему, потому что нет P  
    
- При сетевых сбоях, система может разделиться на 2 раздельных кластера
  По CAP я бы классифицировал эту систему как PA, данные не синхронизованы, но доступны и готовы к разделению
  По PACELC я бы классифицировал эту систему как PAEL, нет консистентности и при PA упор делается на доступность 
  Но вообще слишком мало данных, непонятны условия при и после разделения, при желании можно и принять классификацию как CP или вообще как CAP, что противоречит теореме  
  #### Доработка  
  Оставляю ответ такой же
  
- Система может не прислать корректный ответ или сбросить соединение  
  По CAP я бы классифицировал эту систему как PC, данные синхронизированы, но не всегда корректный ответ или ответ вообще 
  По PACELC я бы классифицировал эту систему как PСEС, есть консистентность и упор делается на нее  
  #### Доработка  
  Оставляю ответ такой же
  
## Задача 3

Могут ли в одной системе сочетаться принципы BASE и ACID? Почему?

### Ответ  

С моей точки зрения, принципы BASE и ACID сочетаться не могут, потому что в принципе BASE данные должны отдаваться быстро и могут быть неверными, а принцип ACID передачу неверных исключает. Это противоречие. Однако в большинстве систем стараются применить оба принципа, но с различными исключениями  

## Задача 4

Вам дали задачу написать системное решение, основой которого бы послужили:

- фиксация некоторых значений с временем жизни
- реакция на истечение таймаута

Вы слышали о key-value хранилище, которое имеет механизм [Pub/Sub](https://habr.com/ru/post/278237/). 
Что это за система? Какие минусы выбора данной системы?

### Ответ  

1) Я не слышал и не сталкивался с key-value хранилищами, которые имеют механизм Pub/Sub
2) Насколько я понял после прочтения статьи, то это система получения данных издатель-подписчик (издатель публикует данные, подписчик забирает нужные ему данные
3) Минусы есть у любой системы, в данном случае можно отметить сложную архитектуру и обслуживание данной системы, в частности нужно предусмотреть очень много факторов:   
   - Где и как хранятся адреса издателей и подписчиков?  
   - Можем ли мы добавить или убрать подписку в любой момент или должны для этого остановить систему?  
   - Важен ли формат сообщения?  
   - Как сообщения фильтруются по подпискам?  
   - Что будет, если система или подписчик не может принять сообщения?  
   - Повторить ли отправку сообщения, если она завершилась неудачей?  
   - Можно ли настраивать алгоритм повторной отправки сообщений?  
   - Как долго сообщения хранятся?  
   - Кто инициирует отправку сообщения?  
   - Что будет, если подписчик перегружен сообщениями?  
4) У нас на работе системное решение, похожее на задаваемое, реализовано на Redis, но без механизма Pub/Sub. У нас Redis хранит кеш высоконагруженого приложения  
